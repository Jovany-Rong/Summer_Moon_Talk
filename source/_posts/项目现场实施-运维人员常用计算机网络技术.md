---
title: 项目现场实施/运维人员常用计算机网络技术
date: 2019-05-31 10:58:50
categories: 计算机技术
tags:
    - 网络
    - 计算机
    - 培训
copyright: true
---

上世纪中期以来，计算机网络已经越来越成为人类社会必不可少的基础设施。当前，我们日常生活和工作几乎离不开计算机网络，无论是“万物互联”的互联网，还是承载各类系统、数据库的专网、内网，都扮演了极为重要的角色。

那么，在我们软件项目现场实施或运维过程中，都需要掌握哪些基本的计算机及网络技能呢？

<!-- More -->

## 1 查看计算机IP

### Windows

打开命令行窗口（cmd或PowerShell），执行以下命令。

```
ipconfig
```

### Linux / MacOS

打开终端（Terminal或Term2等），执行以下命令。

```
ifconfig
```

## 2 测试IP或域名是否连通

注意，目标机器防火墙必须允许回显。

### Windows

打开命令行窗口（cmd或PowerShell），执行以下命令。

```
ping 192.168.1.1
```

其中将 *192.168.1.1* 更改为目标的IP地址或域名。

### Linux / MacOS

打开终端（Terminal或Term2等），执行以下命令。

```
ping 192.168.1.1
```

其中将 *192.168.1.1* 更改为目标的IP地址或域名。

需要使用快捷键 **Ctrl+C** 中止命令，否则 **ping** 命令将持续执行。

## 3 测试目标计算机某端口是否开启

注意，该方法使用Telnet，必须保证计算机已安装Telnet服务。

根据操作系统，打开命令行窗口或终端窗口，执行以下命令。

```
telnet 192.168.1.1 8080
```

其中将 *192.168.1.1 8080* 更改为目标的IP/域名及端口号。

## 4 查看计算机路由

### Windows

打开命令行窗口（cmd或PowerShell），执行以下命令。

```
route print
```

### Linux

打开终端（Terminal），执行以下命令。

```
route
```

### MacOS

打开终端（Terminal或Term2等），执行以下命令。

```
netstat -nr
```

## 5 添加路由

### Windows

打开命令行窗口（cmd或PowerShell），执行以下命令。

```
route add 192.168.1.0 mask 255.255.255.0 192.168.1.1
```

其中将 *192.168.1.0* 更改为目标网段的IP， *255.255.255.0* 更改为子网掩码， *192.168.1.1* 更改为网关。

### Linux

打开终端（Terminal），执行以下命令。

```
route add -net 192.168.1.0 netmask 255.255.255.0 gw 192.168.1.1
```

其中将 *192.168.1.0* 更改为目标网段的IP， *255.255.255.0* 更改为子网掩码， *192.168.1.1* 更改为网关。

### MacOS

打开终端（Terminal或Term2等），执行以下命令。

```
route add 192.168.1.0 -netmask 255.255.255.0 192.168.1.1
```

其中将 *192.168.1.0* 更改为目标网段的IP， *255.255.255.0* 更改为子网掩码， *192.168.1.1* 更改为网关。

## 6 远程桌面

### 6.1 RDP

该方式受控端只支持Windows，需要其打开3389端口。

#### Windows To Windows

通过Windows自带的远程桌面工具完成。

主控端输入快捷键 **Ctrl + R** 调出 **运行** 对话框，在其中输入 **mstsc** 打开远程桌面工具。

输入连接参数，即可完成远程桌面连接。

#### MacOS To Windows

通过Microsoft开发的 **Microsoft Remote Desktop** 应用程序完成。

该应用程序**尚未**在中国Mac App Store上架。

在Mac上登录**美国地区**Apple ID。

在Mac App Store中搜索 **Microsoft Remote Desktop** 应用程序并下载安装。

打开该应用程序，输入连接参数，即可完成远程桌面连接。

#### iOS/Android To Windows

通过Microsoft开发的 **Microsoft Remote Desktop** 应用程序完成。

在手机应用商店（App Store、Play Store等）中搜索 **Microsoft Remote Desktop** 应用程序并下载安装。

打开该应用程序，输入连接参数，即可完成远程桌面连接。

### 6.2 Teamviewer

该工具支持全平台。非商业用途免费，商业用途需付费。

受控端需安装Teamviewer软件或直接运行，若为安装版本还可配置无人值守。

主控端需安装Teamviewer软件，输入受控端的ID和密码即可完成。

在受控端设置中，还可开启使用IP地址作为ID，供内网使用。

### 6.3 SSH

通过SSH2协议进行远程连接。

该方式支持全平台，要求受控端开启SSH服务，但仅支持命令行界面。这是我们远程Linux服务器的主要方式。

主控端若为Linux或MacOS，打开终端就能使用SSH进行远程连接。

主控端若为Windows，可安装第三方软件（PuTTY、XShell等）进行SSH连接。

## 7 Windows文件共享

在Windows计算机中，可对某个目录设置共享，并配置用户权限。使用该功能需打开445端口。

另一台Windows计算机可以输入快捷键 **Ctrl + R** 调出 **运行** 对话框，在其中输入 **//IP地址** 访问该IP对应计算机的共享文件。

*特殊地，通过输入 **//IP地址/d$** 访问该IP对应计算机D盘中的所有文件。*

另一台Linux或MacOS计算机则可以在文件系统管理器中找到局域网中的计算机来访问共享文件。

## 8 FTP

**文件传输协议** （FTP）是一套用于文件传输的标准协议。

### 8.1 搭建FTP服务器

#### Windows

在Windows计算机中，打开IIS管理器。

在IIS管理器中新建FTP站点。输入站点名称和根目录，并绑定本机IP地址和21端口，再配置权限即可完成FTP服务器的搭建。

#### Linux

在Linux计算机中，搭建FTP服务器要稍微复杂一些。

首先通过yum等包管理器安装vsftpd，代码如下。

```
yum -y install vsftpd
```

创建FTP用户，代码如下。

```
useradd -s /sbin/nologin -d /home/ftp ftp
```

为 **ftp** 用户创建密码，代码如下。

```
passwd ftp
```

编辑 **/etc/vsftpd/vsftpd.conf** 文件，将配置项 **anonymous_enable** 的值修改为NO，禁止匿名登录。

启动FTP服务，代码如下。

```
systemctl start vsftpd.service
```

### 8.2 FTP客户端连接

客户端建议使用FileZilla、FlashFXP等第三方客户端连接FTP服务器。

## 9 SFTP

**安全文件传输协议** （SFTP）也是一套用于文件传输的标准协议，它比FTP协议更安全。

### 9.1 搭建SFTP服务器

#### Windows

首先安装 [freeSSHd](http://www.freesshd.com/) 软件，安装过程在此不赘述。

安装完成后打开软件，在 **SSH** 标签页中取消勾选 **Start SSH server on freeSSHd startup** 和 **Use new console engine** ；再在 **Telnet** 标签页中取消勾选 **Start Telnet server on freeSSHd startup** 。

在 **Users** 标签页中添加用户设置，并在 **Authentication** 标签页中选择密码验证和公钥验证，最后在 **SFTP** 标签页中选择根目录。

启动SSH服务即可。

#### Linux

大部分系统原生支持SSHd服务，可以直接使用。

### 9.2 FTP客户端连接

客户端建议使用FileZilla、FlashFXP等第三方客户端连接SFTP服务器。

## 10 SVN

SVN是一个开源的版本控制系统，也是目前我们公司使用的版本控制系统。这里主要介绍一下如何连接SVN服务器进行使用。

### 10.1 客户端选择

Windows计算机可以安装 [**TortoiseSVN**](https://tortoisesvn.net/) ，Mac计算机可在Mac App Store中下载 **SnailSVN Lite** 。

### 10.2 使用方法

使用各个客户端都大同小异。下面介绍几种常见用法。

 - SVN Checkout：检出，迁出SVN配置库的内容。相当于Git中的克隆功能，适用于在本地新建SVN目录。
 - SVN Update：更新，从SVN配置库中更新本地文件，适用于本地SVN目录版本较旧需要更新成SVN配置库中的文件版本。
 - SVN Commit：提交，将本地目录文件提交到SVN配置库中，适用于本地文件较新需要提交到服务器的情况。注意，建议每一次提交都撰写相应的备注，养成良好的版本管理习惯。

## 11 Git

Git是另一个开源的版本控制系统，也是世界上最流行的版本控制系统。它与SVN最大的区别就是支持本地版本管理。这里主要介绍一下如何使用本地Git客户端及GitHub。

### 11.1 客户端安装

Git支持全平台，在其 [**官方网站**](https://git-scm.com/) 可以下载对应版本的Git软件。

### 11.2 创建版本库

创建一个空目录，并将命令行窗口或终端窗口定位到该目录下。

执行如下代码创建Git版本库。

```
git init
```

### 11.3 将文件添加到版本库

例如我们新建了一个说明文件 **readme.md** ，现在想将它添加到Git版本库，执行如下代码。

```
git add readme.md
```

特别地，如果要将目录下所有文件添加到版本库，执行如下代码。

```
git add .
```

再执行如下代码将刚才的add操作提交。

```
git commit -m "hello world"
```

其中 *hello world* 可替换成想要的备注。

### 11.4 添加GitHub远程仓库

在 [**GitHub**](https://github.com) 中，注册或登录自己的账号，为了方便描述，这里将用户名暂定为 **Your-Name** ，执行代码时需将其改为自己的用户名。

在GitHub页面右上角找到 **Create a new repo** 按钮，创建一个新的仓库，这里仓库名暂定为 **learngit** 。

在本地仓库中，执行如下代码添加远程仓库。

```
git remote add origin git@github.com:Your-Name/learngit.git
```

第一次推送远程仓库时，使用如下命令。

```
git push -u origin master
```

以后再推送远程仓库时，使用如下命令。

```
git push origin master
```

## 12 NAS

NAS被定义为一种特殊的专用数据存储服务器，包括存储器件（例如磁盘阵列、CD/DVD驱动器、磁带驱动器或可移动的存储介质）和内嵌系统软件，可提供跨平台文件共享功能。NAS通常在一个LAN上占有自己的节点，无需应用服务器的干预，允许用户在网络上存取数据，在这种配置中，NAS集中管理和处理网络上的所有数据，将负载从应用或企业服务器上卸载下来，有效降低总拥有成本，保护用户投资。

简单地说，NAS和网盘类似，只不过这个网盘是我们自己搭建的，主动权掌握在我们自己手里。

目前市面上常见的NAS品牌有Synology（群晖）、Buffalo（巴法络）、QNAP（威联通）等。

对自建NAS有兴趣的同学，请参考 [这篇博文](https://www.jianshu.com/p/1d45d2baa24f) 进行搭建。

## 13 防火墙

所谓防火墙指的是一个由软件和硬件设备组合而成、在内部网和外部网之间、专用网与公共网之间的边界上构造的保护屏障.是一种获取安全性方法的形象说法，它是一种计算机硬件和软件的结合，使Internet与Intranet之间建立起一个安全网关（Security Gateway），从而保护内部网免受非法用户的侵入，防火墙主要由服务访问规则、验证工具、包过滤和应用网关4个部分组成，防火墙就是一个位于计算机和它所连接的网络之间的软件或硬件。该计算机流入流出的所有网络通信和数据包均要经过此防火墙。

在网络中，所谓“防火墙”，是指一种将内部网和公众访问网（如Internet）分开的方法，它实际上是一种隔离技术。防火墙是在两个网络通讯时执行的一种访问控制尺度，它能允许你“同意”的人和数据进入你的网络，同时将你“不同意”的人和数据拒之门外，最大限度地阻止网络中的黑客来访问你的网络。换句话说，如果不通过防火墙，公司内部的人就无法访问Internet，Internet上的人也无法和公司内部的人进行通信。

***注意，在任何时候不建议关闭防火墙！需要时开启相应端口即可。***

### 13.1 Windows防火墙

本例中以在Winodows计算机中配置防火墙，使其他计算机能通过3306端口访问这台计算机为例。

首先打开防火墙设置界面。

依次点击这些按钮：**入站规则->新建规则->自定义->下一步->所有程序** 。

选择协议类型为 **TCP** ，本地端口选择 **特定端口** ，并填写 **3306** ，在点击 **下一步** 。

选择此规则应用于的远程IP。选择 **下列IP地址->添加** ，输入允许访问本地3306端口的IP。

一路下一步，配置一个简明的规则名称，如 **MySQL访问** ，最后点击 **完成** 。

### 13.2 Linux防火墙

由于不同的Linux版本采用的防火墙版本不同，这里以在CentOS 6中开放3306端口为例。

在终端中输入如下命令开启3306端口。

```
iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 3306 -j ACCEPT
```

输入如下命令，保存防火墙设置。

```
service iptables save
```

输入如下命令，重新启动防火墙。

```
service iptables restart
```

## 14 病毒防护

### Windows

Windows相对是计算机病毒最泛滥的平台，因此建议在保证防火墙开启的前提下，安装杀毒软件。项目现场如果客户已经购买了企业级杀毒软件，一定要定期查杀病毒。

个人版杀毒软件可以根据个人喜好安装 **火绒** 、 **360** 等。

同时，由于近年来勒索病毒肆虐，一定要检查计算机的危险端口（如3389、445、139等）在不必要时保持关闭。

### Linux/MacOS

确保防火墙时刻开启并正确配置可免受大部分木马和病毒的侵扰。

## 15 加密及数字签名

加密算法主要有两种，对称加密和非对称加密。

 - 对称加密：加密和解密的密钥一样，比如用123加密就是用123解密，但是实际中密码都是普通数据在互联网传输的，这样一点密码被中间人截取并破解，加密直接被攻破。
 - 非对称加密：把密钥分为公钥和私钥，公钥是公开的所有人都可以认领，私钥是保密的只有一个人知道。假设A要发送一封Email给B，他不想让任何其他人在传输中看到Email的内容，做法就是使用B的公钥对Email加密，只有B的私钥能够解密（B的私钥唯一性保证信件不会泄露）。

公钥的作用：对内容本身加密，保证不被其他人看到。

私钥的作用：证明内容的来源。

公钥和私钥是配对关系，公钥加密就用私钥解密，反之亦然，用错的密钥来尝试解密会报错。

对于数字签名，也可以用这个例子做一个通俗的解释。

 - A先对这封Email执行哈希运算得到hash值简称“摘要”，取名h1。
 - 然后用自己私钥对摘要加密，生成的东西叫“数字签名”。
 - 把数字签名加在Email正文后面，一起发送给B。当然，为了防止邮件被窃听你可以用继续公钥加密。
 - B收到邮件后用A的公钥对数字签名解密，成功则代表Email确实来自A，失败说明有人冒充。
 - B对邮件正文执行哈希运算得到hash值，取名h2。
 - B会对比第4步数字签名的hash值h1和自己运算得到的h2，一致则说明邮件未被篡改。